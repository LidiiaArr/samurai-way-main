"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[322],{1322:function(t,e,s){s.r(e),s.d(e,{default:function(){return D}});var n=s(8683),r=s(5671),o=s(3144),i=s(136),a=s(5716),u=s(2791),l={content:"ProfileInfo_content__DznCY",item:"ProfileInfo_item__Qn6+5",descriptionBlock:"ProfileInfo_descriptionBlock__XBXuJ",mainPhoto:"ProfileInfo_mainPhoto__QU8TO"},c=s(4374),p=s(2814),f=s(885),d=s(184),h=function(t){var e=(0,u.useState)(!1),s=(0,f.Z)(e,2),n=s[0],r=s[1],o=(0,u.useState)(t.status),i=(0,f.Z)(o,2),a=i[0],l=i[1];(0,u.useEffect)((function(){l(t.status)}),[t.status]);return(0,d.jsx)("div",{children:n?(0,d.jsx)("div",{children:(0,d.jsx)("input",{type:"text",value:a,onChange:function(t){l(t.currentTarget.value)},onBlur:function(){r(!1),t.updateStatus(a)},autoFocus:!0})}):(0,d.jsxs)("div",{onDoubleClick:function(){r(!0)},style:{fontWeight:"bold"},children:["\u0421\u0442\u0430\u0442\u0443\u0441 : ",(0,d.jsxs)("span",{style:{fontWeight:"normal"},children:[" ",a]})]})})};function m(t){if(!t.profile)return(0,d.jsx)(c.Z,{});return(0,d.jsx)("div",{children:(0,d.jsxs)("div",{className:l.descriptionBlock,children:[(0,d.jsx)("img",{src:t.profile.photos.large?t.profile.photos.large:p,alt:"profile Photo",className:l.mainPhoto}),(0,d.jsx)("div",{className:l.input,children:t.isOwner&&(0,d.jsx)("input",{type:"file",onChange:function(e){console.log(e.currentTarget.files[0]),e.currentTarget.files.length&&t.savePhoto(e.currentTarget.files[0])}})}),(0,d.jsx)(h,{status:t.status,updateStatus:t.updateStatus})]})})}var v=s(81),x=s(2982),g="MyPosts_postsBlock__lB-pf",P="MyPosts_posts__GSiZ2",j="Post_item__Yu4oG";function y(t){return(0,d.jsxs)("div",{className:j,children:[(0,d.jsx)("img",{src:"https://games.mail.ru/hotbox/content_files/news/2021/12/09/da11fab296d549999fa36b968a0333cc.jpg"}),t.message,(0,d.jsx)("div",{children:(0,d.jsxs)("span",{children:["like ",t.likesCount]})})]})}var _=s(6139),b=s(704),S=s(3079),k=s(1117),w=u.memo((function(t){var e=(0,x.Z)(t.posts).reverse().map((function(t){return(0,d.jsx)(y,{message:t.message,likesCount:t.likesCount})}));return(0,d.jsxs)("div",{className:g,children:[(0,d.jsx)("h3",{children:"My posts"}),(0,d.jsx)(I,{onSubmit:function(e){t.addPost(e.newPostText)}}),(0,d.jsx)("div",{className:P,children:e})]})})),Z=(0,S.D)(10),I=(0,b.Z)({form:"ProfileAddNewPostForm"})((function(t){return(0,d.jsxs)("form",{onSubmit:t.handleSubmit,children:[(0,d.jsx)("div",{children:(0,d.jsx)(_.Z,{name:"newPostText",component:k.gx,placeholder:"Post message",validate:[S.C,Z]})}),(0,d.jsx)("div",{children:(0,d.jsx)("button",{children:"Add post"})})]})})),C=s(364),T=(0,C.$j)((function(t){return{posts:t.profilePage.posts,newPostText:t.profilePage.newPostText}}),(function(t){return{addPost:function(e){t((0,v.Wl)(e))}}}))(w);function N(t){return console.log(t.profile),(0,d.jsxs)("div",{children:[(0,d.jsx)(m,{profile:t.profile,status:t.status,updateStatus:t.updateStatus,isOwner:t.isOwner,savePhoto:t.savePhoto}),(0,d.jsx)(T,{})]})}var B=s(9271),A=s(7781),U=function(t){(0,i.Z)(s,t);var e=(0,a.Z)(s);function s(){return(0,r.Z)(this,s),e.apply(this,arguments)}return(0,o.Z)(s,[{key:"refreshProfile",value:function(){var t=this.props.match.params.userId;t||(t=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(+t),this.props.getStatus(+t)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,e,s){this.props.match.params.userId!=t.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,d.jsx)(N,(0,n.Z)((0,n.Z)({},this.props),{},{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:!Boolean(this.props.match.params.userId),savePhoto:this.props.savePhoto}))}}]),s}(u.Component),D=(0,A.qC)((0,C.$j)((function(t){return{profile:t.profilePage.profile,isAuth:t.auth.isAuth,status:t.profilePage.status,authorizedUserId:t.auth.userId}}),{getUserProfile:v.et,getStatus:v.lR,updateStatus:v.Nf,savePhoto:v.Ju}),B.EN)(U)},2814:function(t,e,s){t.exports=s.p+"static/media/single-user-icon-png-free--rLHSHx.c2b12d0011c453b98212.png"},885:function(t,e,s){s.d(e,{Z:function(){return r}});var n=s(181);function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var s=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=s){var n,r,o=[],i=!0,a=!1;try{for(s=s.call(t);!(i=(n=s.next()).done)&&(o.push(n.value),!e||o.length!==e);i=!0);}catch(u){a=!0,r=u}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return o}}(t,e)||(0,n.Z)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=322.1430a6cd.chunk.js.map