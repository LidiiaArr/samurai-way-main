"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[322],{1322:function(t,e,s){s.r(e),s.d(e,{default:function(){return D}});var n=s(8683),o=s(5671),r=s(3144),i=s(136),a=s(5716),u=s(2791),l=s(885),c={content:"ProfileInfo_content__DznCY",item:"ProfileInfo_item__Qn6+5",descriptionBlock:"ProfileInfo_descriptionBlock__XBXuJ",mainPhoto:"ProfileInfo_mainPhoto__QU8TO",contact:"ProfileInfo_contact__sQB8W"},d=s(4374),f=s(2814),p=s(184),h=function(t){var e=(0,u.useState)(!1),s=(0,l.Z)(e,2),n=s[0],o=s[1],r=(0,u.useState)(t.status),i=(0,l.Z)(r,2),a=i[0],c=i[1];(0,u.useEffect)((function(){c(t.status)}),[t.status]);return(0,p.jsx)("div",{children:n?(0,p.jsx)("div",{children:(0,p.jsx)("input",{type:"text",value:a,onChange:function(t){c(t.currentTarget.value)},onBlur:function(){o(!1),t.updateStatus(a)},autoFocus:!0})}):(0,p.jsxs)("div",{onDoubleClick:function(){o(!0)},style:{fontWeight:"bold"},children:["\u0421\u0442\u0430\u0442\u0443\u0441 : ",(0,p.jsxs)("span",{style:{fontWeight:"normal"},children:[" ",a]})]})})};function m(t){var e=(0,u.useState)(!1),s=(0,l.Z)(e,2),n=s[0],o=s[1];if(!t.profile)return(0,p.jsx)(d.Z,{});return(0,p.jsx)("div",{children:(0,p.jsxs)("div",{className:c.descriptionBlock,children:[(0,p.jsx)("img",{src:t.profile.photos.large?t.profile.photos.large:f,alt:"profile Photo",className:c.mainPhoto}),n?(0,p.jsx)(j,{profile:t.profile,isOwner:t.isOwner,setEditMode:o}):(0,p.jsx)(x,{profile:t.profile,isOwner:t.isOwner,onMainPhotoSelected:function(e){console.log(e.currentTarget.files[0]),e.currentTarget.files.length&&t.savePhoto(e.currentTarget.files[0])},setEditMode:o}),(0,p.jsx)(h,{status:t.status,updateStatus:t.updateStatus})]})})}var x=function(t){var e=t.profile,s=t.isOwner,n=t.onMainPhotoSelected,o=t.setEditMode;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:c.input,children:s&&(0,p.jsx)("input",{type:"file",onChange:n})}),(0,p.jsx)("div",{className:c.button,children:s&&(0,p.jsx)("div",{children:(0,p.jsx)("button",{onClick:function(){return o(!0)},children:"edit"})})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Looking for a job"}),": ",e.lookingForAJob?"yes":"no"]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"About me"}),": ",e.lookingForAJob?"yes":"I am a cool person"]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Contacts"}),": ",Object.keys(e.contacts).map((function(t){return(0,p.jsx)(v,{contactTitle:t,contactValue:e[t]},t)}))]})]})},j=function(t){t.profile;var e=t.isOwner,s=t.setEditMode;return(0,p.jsx)("div",{children:(0,p.jsx)("div",{className:c.button,children:e&&(0,p.jsx)("div",{children:(0,p.jsx)("button",{onClick:function(){s(!1)},children:"cancel"})})})})},v=function(t){var e=t.contactTitle,s=t.contactValue;return(0,p.jsxs)("div",{className:c.contact,children:[(0,p.jsx)("b",{children:e}),": ",s]})},g=s(81),P=s(2982),b="MyPosts_postsBlock__lB-pf",y="MyPosts_posts__GSiZ2",_="Post_item__Yu4oG";function k(t){return(0,p.jsxs)("div",{className:_,children:[(0,p.jsx)("img",{src:"https://games.mail.ru/hotbox/content_files/news/2021/12/09/da11fab296d549999fa36b968a0333cc.jpg"}),t.message,(0,p.jsx)("div",{children:(0,p.jsxs)("span",{children:["like ",t.likesCount]})})]})}var S=s(6139),w=s(704),Z=s(3079),C=s(1117),I=u.memo((function(t){var e=(0,P.Z)(t.posts).reverse().map((function(t){return(0,p.jsx)(k,{message:t.message,likesCount:t.likesCount},t.message)}));return(0,p.jsxs)("div",{className:b,children:[(0,p.jsx)("h3",{children:"My posts"}),(0,p.jsx)(T,{onSubmit:function(e){t.addPost(e.newPostText)}}),(0,p.jsx)("div",{className:y,children:e})]})})),N=(0,Z.D)(10),T=(0,w.Z)({form:"ProfileAddNewPostForm"})((function(t){return(0,p.jsxs)("form",{onSubmit:t.handleSubmit,children:[(0,p.jsx)("div",{children:(0,p.jsx)(S.Z,{name:"newPostText",component:C.gx,placeholder:"Post message",validate:[Z.C,N]})}),(0,p.jsx)("div",{children:(0,p.jsx)("button",{children:"Add post"})})]})})),O=s(364),M=(0,O.$j)((function(t){return{posts:t.profilePage.posts,newPostText:t.profilePage.newPostText}}),(function(t){return{addPost:function(e){t((0,g.Wl)(e))}}}))(I);function A(t){return(0,p.jsxs)("div",{children:[(0,p.jsx)(m,{profile:t.profile,status:t.status,updateStatus:t.updateStatus,isOwner:t.isOwner,savePhoto:t.savePhoto}),(0,p.jsx)(M,{})]})}var B=s(9271),E=s(7781),U=function(t){(0,i.Z)(s,t);var e=(0,a.Z)(s);function s(){return(0,o.Z)(this,s),e.apply(this,arguments)}return(0,r.Z)(s,[{key:"refreshProfile",value:function(){var t=this.props.match.params.userId;t||(t=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(+t),this.props.getStatus(+t)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,e,s){this.props.match.params.userId!=t.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,p.jsx)(A,(0,n.Z)((0,n.Z)({},this.props),{},{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:!Boolean(this.props.match.params.userId),savePhoto:this.props.savePhoto}))}}]),s}(u.Component),D=(0,E.qC)((0,O.$j)((function(t){return{profile:t.profilePage.profile,isAuth:t.auth.isAuth,status:t.profilePage.status,authorizedUserId:t.auth.userId}}),{getUserProfile:g.et,getStatus:g.lR,updateStatus:g.Nf,savePhoto:g.Ju}),B.EN)(U)},2814:function(t,e,s){t.exports=s.p+"static/media/single-user-icon-png-free--rLHSHx.c2b12d0011c453b98212.png"},885:function(t,e,s){s.d(e,{Z:function(){return o}});var n=s(181);function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var s=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=s){var n,o,r=[],i=!0,a=!1;try{for(s=s.call(t);!(i=(n=s.next()).done)&&(r.push(n.value),!e||r.length!==e);i=!0);}catch(u){a=!0,o=u}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return r}}(t,e)||(0,n.Z)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=322.4d06e357.chunk.js.map